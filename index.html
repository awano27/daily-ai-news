<!DOCTYPE html>

<html data-theme="light" lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Daily AI News — 2025-10-18 23:12 JST</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;family=Manrope:wght@600;700;800&amp;family=Noto+Sans+JP:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="style.css" rel="stylesheet"/>
<!-- Last update: 2025-10-18 23:12:35 JST -->
</head>
<body>
<a class="skip-link" href="#mainContent">本文へスキップ</a>
<header class="site-header" role="banner">
<div class="header-inner">
<div aria-label="Daily AI News" class="brand-area">
<div aria-hidden="true" class="brand-logo">📰</div>
<div class="brand-copy">
<span class="brand-name">Daily AI News</span>
<span class="brand-tagline">AIの最前線を日本語でスピーディに把握</span>
</div>
</div>
<div class="header-actions">
<button aria-label="テーマを切り替え" aria-pressed="false" class="theme-toggle" id="themeToggle" type="button">
<span aria-hidden="true" class="toggle-icon">🌞</span>
<span class="toggle-label">ライト</span>
</button>
</div>
</div>
</header>
<main id="mainContent">
<h1 class="page-title">今日の最新AI情報</h1>
<p class="lead">
      エンジニア関連度スコアでランキング表示。実装可能性・技術的価値・学習効果を重視した自動ソート。
      豊富な情報量を維持しつつ、重要度で整理表示。
    </p>
<section aria-label="更新状況と主要指標" class="status-overview">
<div aria-live="polite" class="status-meta">
<span class="status-updated">最終更新：2025-10-18 23:12 JST</span>
<span class="status-window">対象期間：過去24時間</span>
</div>
<div aria-label="主要指標" class="kpi-grid metrics-grid">
<article aria-label="総記事数" class="kpi-card metric-card" role="group">
<div class="kpi-value metric-value">13件</div>
<div class="kpi-label metric-label">総記事数</div>
<div class="kpi-note metric-note">情報量維持</div>
</article>
<article aria-label="高優先度記事" class="kpi-card metric-card" role="group">
<div class="kpi-value metric-value">13件</div>
<div class="kpi-label metric-label">高優先度記事</div>
<div class="kpi-note metric-note">スコア7.0+</div>
</article>
<article aria-label="情報源" class="kpi-card metric-card" role="group">
<div class="kpi-value metric-value">4個</div>
<div class="kpi-label metric-label">情報源</div>
<div class="kpi-note metric-note">多角的収集</div>
</article>
<article aria-label="収集範囲" class="kpi-card metric-card" role="group">
<div class="kpi-value metric-value">24h</div>
<div class="kpi-label metric-label">収集範囲</div>
<div class="kpi-note metric-note">最新性重視</div>
</article>
</div>
</section>
<section aria-label="記事フィルター" class="filters filter-bar">
<form class="filters-form" role="search">
<div class="filter-group">
<label class="filter-label" for="searchInput">キーワード検索</label>
<input aria-label="記事を検索" class="filter-input" id="searchInput" placeholder="例：LLM、OpenAI、ビジネス" type="search"/>
<div aria-live="polite" class="search-tags" id="searchTags" role="list"></div>
</div>
<div class="filter-group">
<label class="filter-label" for="importanceFilter">重要度</label>
<select aria-label="重要度で絞り込み" class="filter-select" id="importanceFilter">
<option value="all">すべて</option>
<option value="high">高 (7.0+)</option>
<option value="medium">中 (4.0-6.9)</option>
<option value="low">低 (0-3.9)</option>
</select>
</div>
<div class="filter-group">
<label class="filter-label" for="freshnessFilter">鮮度</label>
<select aria-label="掲載からの時間で絞り込み" class="filter-select" id="freshnessFilter">
<option value="all">すべての期間</option>
<option value="24h">24時間以内</option>
<option value="72h">3日以内</option>
<option value="168h">7日以内</option>
</select>
</div>
<div class="filter-group">
<label class="filter-label" for="sortBy">並び順</label>
<select aria-label="記事の並び順を選択" class="filter-select" id="sortBy">
<option value="importance">重要度順</option>
<option value="freshness">鮮度順</option>
<option value="time">時間順</option>
<option value="none">ソートなし</option>
</select>
</div>
</form>
<div aria-live="polite" class="filter-results" id="resultsCount"></div>
</section>
<section aria-label="カテゴリフィルター" class="category-filter">
<div aria-label="カテゴリを選択" class="category-filter__group" role="group">
<button aria-label="すべてのニュースを表示" aria-pressed="true" class="category-button is-active" data-category="all" type="button">
<span aria-hidden="true">🌐</span>
<span class="category-button__label">すべて</span>
</button>
<button aria-label="ビジネスニュースのみを表示" aria-pressed="false" class="category-button" data-category="business" type="button">
<span aria-hidden="true">📈</span>
<span class="category-button__label">ビジネスニュース</span>
</button>
<button aria-label="ツールニュースのみを表示" aria-pressed="false" class="category-button" data-category="tools" type="button">
<span aria-hidden="true">🛠️</span>
<span class="category-button__label">ツールニュース</span>
</button>
<button aria-label="SNSや論文ポストのみを表示" aria-pressed="false" class="category-button" data-category="posts" type="button">
<span aria-hidden="true">💬</span>
<span class="category-button__label">SNS/論文ポスト</span>
</button>
</div>
</section>
<section aria-label="ニュース記事一覧" class="news-results">
<div class="news-grid" id="newsGrid" role="list"></div>
</section>
<section class="tab-panel" id="business">
<article class="card">
<div class="card-header">
<a class="card-title" href="https://techcrunch.com/2025/10/17/silicon-valley-spooks-the-ai-safety-advocates/" rel="noopener" target="_blank">Silicon Valley spooks the AI safety advocates</a>
</div>
<div class="card-body">
<p class="card-summary">ホワイトハウスのデービッド・サックス氏とオープンAIのジェイソン・クォン氏は今週、AIの安全性を推進する団体に関するコメントでネット上で波紋を呼んだ。</p>
<div class="chips">
<span class="chip">TechCrunch Japan</span>
<span class="chip ghost">翻訳: 日本語 / 原文: 英語</span>
<span class="chip ghost">21時間前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://techcrunch.com/2025/10/17/silicon-valley-spooks-the-ai-safety-advocates/" rel="noopener" target="_blank">https://techcrunch.com/2025/10/17/silicon-valley-spooks-the-ai-safety-advocates/</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://www.reddit.com/r/artificial/comments/1o9lt71/perplexitys_comet_browser_is_absolutely_cracked/" rel="noopener" target="_blank">Perplexity's Comet Browser is absolutely CRACKED for AI</a>
</div>
<div class="card-body">
<p class="card-summary">Perplexity の Comet Browser を試してみました。誰でも無料でダウンロードできるからです...すごいですね。 AI とブラウジングを愛する人にとって、これは絶対にクラックです!非常に直感的で超高速な AI 機能は、まさに魔法のように感じられます。自動要約、詳細な検索、ブラウザの自動化がすべて組み込まれており、驚異的な精度と速度を実現します。ブラウジング エクスペリエンスをレベルアップして、ブラウザー内で AI による *実際の作業* を実現したい場合は、これが次のレベルです。試してみることを強くお勧めします。実はコメットさんにこの投稿を書いて作るように言いました（笑）。 ...</p>
<div class="chips">
<span class="chip">Reddit AI</span>
<span class="chip ghost">翻訳: 日本語 / 原文: 英語</span>
<span class="chip ghost">19時間前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://www.reddit.com/r/artificial/comments/1o9lt71/perplexitys_comet_browser_is_absolutely_cracked/" rel="noopener" target="_blank">https://www.reddit.com/r/artificial/comments/1o9lt71/perplexitys_comet_browser_is_absolutely_cracked/</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://www.reddit.com/r/artificial/comments/1o9h2er/need_help_with_idea_of_getting_into_ai/" rel="noopener" target="_blank">Need help with idea of getting into AI</a>
</div>
<div class="card-body">
<p class="card-summary">AI への参入の可能性を検討しています。AI を次の目的で使用したいと考えています。ストーリーの生成、Ai 写真の作成、AI の服の交換、さらにはローカルの「ChatGPT」さえも可能です。タイプ AI には、ストーリー生成用の無修正モデルも必要です。  どこから始めればよいかわかりません。これが私の現在のシステムです。 x570 MB、32gb ram、12gb 6700xt カードで 3700x。これに大金を投じたくない。 1,000 ドル以下が望ましい 古いサーバーを考えていました。おそらく、64GB RAM と 24GB 3090 または古い v100 カードを備えた 16+ コア。ま...</p>
<div class="chips">
<span class="chip">Reddit AI</span>
<span class="chip ghost">翻訳: 日本語 / 原文: 英語</span>
<span class="chip ghost">23時間前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://www.reddit.com/r/artificial/comments/1o9h2er/need_help_with_idea_of_getting_into_ai/" rel="noopener" target="_blank">https://www.reddit.com/r/artificial/comments/1o9h2er/need_help_with_idea_of_getting_into_ai/</a></div>
</article>
</section>
<section class="tab-panel hidden" id="tools">
<article class="card">
<div class="card-header">
<a class="card-title" href="https://www.reddit.com/r/MachineLearning/comments/1o9u4cx/d_dan_bricklin_lessons_from_building_the_first/" rel="noopener" target="_blank">[D] Dan Bricklin: Lessons from Building the First Killer App | Learning from Machine Learning #14</a>
</div>
<div class="card-body">
<p class="card-summary">パーソナル コンピューター革命を引き起こした最初の電子スプレッドシートである VisiCalc の共同作成者である Dan Bricklin との機械学習から学ぶの新しいエピソード。画期的なイノベーションに関する彼の洞察: イノベーションは段階的に改善されるのではなく、100 倍改善されなければなりません。彼の枠組みはシンプルです。何かが本当に重要かどうかを評価するときは、次のように考えてください。これは本当に優れている点は何ですか?以前は不可能だったことは何でしょうか?人々はどのようなトレードオフを受け入れるでしょうか?すぐに元が取れますか？  これらと同じ疑問がスプレッドシートを必然化し、...</p>
<div class="chips">
<span class="chip">Reddit MachineLearning</span>
<span class="chip ghost">翻訳: 日本語 / 原文: 英語</span>
<span class="chip ghost">11時間前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://www.reddit.com/r/MachineLearning/comments/1o9u4cx/d_dan_bricklin_lessons_from_building_the_first/" rel="noopener" target="_blank">https://www.reddit.com/r/MachineLearning/comments/1o9u4cx/d_dan_bricklin_lessons_from_building_the_first/</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://www.reddit.com/r/MachineLearning/comments/1o9pnaz/p_beensminimax_103m_moe_llm_from_scratch/" rel="noopener" target="_blank">[P]: Beens-MiniMax: 103M MoE LLM from Scratch</a>
</div>
<div class="card-body">
<p class="card-summary">私は、この非常に単純な MoE [ Beens-MiniMax ] を 5 日間でゼロから構築し、トレーニングしました。詳細については、こちらのレポートをご覧ください。  &amp;#32;によって送信されました &amp;#32;  /u/外部_Mushroom978 [リンク] &amp;#32; [コメント]</p>
<div class="chips">
<span class="chip">Reddit MachineLearning</span>
<span class="chip ghost">翻訳: 日本語 / 原文: 英語</span>
<span class="chip ghost">15時間前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://www.reddit.com/r/MachineLearning/comments/1o9pnaz/p_beensminimax_103m_moe_llm_from_scratch/" rel="noopener" target="_blank">https://www.reddit.com/r/MachineLearning/comments/1o9pnaz/p_beensminimax_103m_moe_llm_from_scratch/</a></div>
</article>
</section>
<section class="tab-panel hidden" id="posts">
<article class="card">
<div class="card-header">
<a class="card-title" href="https://twitter.com/oikon48/status/1978090595815137416" rel="noopener" target="_blank">Xポスト oikon48</a>
</div>
<div class="card-body">
<p class="card-summary">Codex Meetup Tokyo #1 所感とスライド ・AIコードレビューはみんな幸せになる! ・新しいライブラリを使う時は、テンプレートプロジェクトの用意をするのがおすすめ ・人がボトルネックにどんどんなっていく ・Code environmentのDockerファイルはかなり柔軟で良さそう! ・CodeRabbit の名前 Hoopy https://t.co/qIAuWJlJyC</p>
<div class="chips">
<span class="chip">X / SNS (Enhanced)</span>
<span class="chip ghost">原文: 日本語</span>
<span class="chip ghost">0秒前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://twitter.com/oikon48/status/1978090595815137416" rel="noopener" target="_blank">https://twitter.com/oikon48/status/1978090595815137416</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://twitter.com/itm_aiplus/status/1977933650906984951" rel="noopener" target="_blank">Xポスト itm_aiplus</a>
</div>
<div class="card-body">
<p class="card-summary">生成AI導入に必要なのは「嫌われる勇気」──“オレ流”で貫く、組織改革のススメ https://t.co/IEpfmZPByn</p>
<div class="chips">
<span class="chip">X / SNS (Enhanced)</span>
<span class="chip ghost">原文: 日本語</span>
<span class="chip ghost">0秒前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://twitter.com/itm_aiplus/status/1977933650906984951" rel="noopener" target="_blank">https://twitter.com/itm_aiplus/status/1977933650906984951</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://twitter.com/dani_avila7/status/1978167030659326031" rel="noopener" target="_blank">Xポスト dani_avila7</a>
</div>
<div class="card-body">
<p class="card-summary">クロード コード テンプレートのダウンロード数が 10 万件に達しました 🎉 新しい分析が公開されました: - コンポーネントをダウンロードしている上位の国 - カテゴリ別の成長傾向 - 125 か国の 562 のコンポーネント エージェントがチャートを独占 データにより、コミュニティが実際に https://t.co/9PfREb1zNk をどのように使用しているかが明らかになり始めています</p>
<div class="chips">
<span class="chip">X / SNS (Enhanced)</span>
<span class="chip ghost">翻訳: 日本語 / 原文: 英語</span>
<span class="chip ghost">0秒前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://twitter.com/dani_avila7/status/1978167030659326031" rel="noopener" target="_blank">https://twitter.com/dani_avila7/status/1978167030659326031</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://twitter.com/MinoDriven/status/1978021658096021548" rel="noopener" target="_blank">Xポスト MinoDriven</a>
</div>
<div class="card-body">
<p class="card-summary">AIで開発プロセス全体を爆速化する手法を、AWSさんで学んできたレポートです。 人間が全くコードを書かず、AIへの指示だけで動作可能なものを高速開発!僕も設計スペシャリストという立ち位置で参加してきました。 https://t.co/k11oYoEfiy</p>
<div class="chips">
<span class="chip">X / SNS (Enhanced)</span>
<span class="chip ghost">原文: 日本語</span>
<span class="chip ghost">0秒前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://twitter.com/MinoDriven/status/1978021658096021548" rel="noopener" target="_blank">https://twitter.com/MinoDriven/status/1978021658096021548</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://twitter.com/testingcatalog/status/1978153397552374168" rel="noopener" target="_blank">Xポスト testingcatalog</a>
</div>
<div class="card-body">
<p class="card-summary">速報 🚨: OpenAI は API で GPT-5 を利用した新しい検索モデルをリリースします。すでに OpenAI プラットフォームで利用可能です。 - gpt-5-search-api-2025-10-14 - gpt-5-search-api h/t @legit_api https://t.co/7lqhNywrDa</p>
<div class="chips">
<span class="chip">X / SNS (Enhanced)</span>
<span class="chip ghost">翻訳: 日本語 / 原文: 英語</span>
<span class="chip ghost">0秒前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://twitter.com/testingcatalog/status/1978153397552374168" rel="noopener" target="_blank">https://twitter.com/testingcatalog/status/1978153397552374168</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://twitter.com/tmiyata25/status/1977892647760208258" rel="noopener" target="_blank">Xポスト tmiyata25</a>
</div>
<div class="card-body">
<p class="card-summary">Azureで構築したMCPサーバとCopilot Studioの連携方法について解説されたブログ、めちゃ分かりやすい https://t.co/HfWpczNGkq</p>
<div class="chips">
<span class="chip">X / SNS (Enhanced)</span>
<span class="chip ghost">原文: 日本語</span>
<span class="chip ghost">0秒前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://twitter.com/tmiyata25/status/1977892647760208258" rel="noopener" target="_blank">https://twitter.com/tmiyata25/status/1977892647760208258</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://twitter.com/yugen_matuni/status/1978076652392374497" rel="noopener" target="_blank">Xポスト yugen_matuni</a>
</div>
<div class="card-body">
<p class="card-summary">10/21に開催される「Biz × Dify Meetup」に登壇します! やはり使ってもらってなんぼの生成AIで、「どうやったら真に使ってもらえるんだろう」みたいな現場に沿った内容をお話ししたり、共有できる場になると思うので、ぜひぜひビジネス側の方でもご参加いただけたらと思います! https://t.co/TP3uQhEoci</p>
<div class="chips">
<span class="chip">X / SNS (Enhanced)</span>
<span class="chip ghost">原文: 日本語</span>
<span class="chip ghost">0秒前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://twitter.com/yugen_matuni/status/1978076652392374497" rel="noopener" target="_blank">https://twitter.com/yugen_matuni/status/1978076652392374497</a></div>
</article>
<article class="card">
<div class="card-header">
<a class="card-title" href="https://twitter.com/NGO275/status/1977972667153346920" rel="noopener" target="_blank">Xポスト NGO275</a>
</div>
<div class="card-body">
<p class="card-summary">nanochatを動かしてみてる。LLMの勉強にはこれが一番早いと思う。本読むより手触り感があってイメージがつきやすい https://t.co/wWIZpQ08dO https://t.co/nx2Aw1XTGk</p>
<div class="chips">
<span class="chip">X / SNS (Enhanced)</span>
<span class="chip ghost">原文: 日本語</span>
<span class="chip ghost">0秒前</span>
<span class="chip ghost">要約: 日本語</span></div>
</div>
<div class="card-footer">出典: <a href="https://twitter.com/NGO275/status/1977972667153346920" rel="noopener" target="_blank">https://twitter.com/NGO275/status/1977972667153346920</a></div>
</article>
</section>
</main>
<script>
    document.addEventListener('DOMContentLoaded', () => {
      const root = document.documentElement;
      const themeToggle = document.getElementById('themeToggle');
      const searchForm = document.querySelector('.filters-form');
      const searchInput = document.getElementById('searchInput');
      const searchTagsContainer = document.getElementById('searchTags');
      const importanceSelect = document.getElementById('importanceFilter');
      const freshnessSelect = document.getElementById('freshnessFilter');
      const sortSelect = document.getElementById('sortBy');
      const resultsRegion = document.getElementById('resultsCount');
      const categoryButtons = Array.from(document.querySelectorAll('.category-button'));
      const newsGrid = document.getElementById('newsGrid');
      const legacyPanels = Array.from(document.querySelectorAll('.tab-panel'));

      if (!newsGrid || legacyPanels.length === 0) {
        return;
      }

      const labelByCategory = new Map([
        ['all', 'すべて'],
        ['business', 'ビジネスニュース'],
        ['tools', 'ツールニュース'],
        ['posts', 'SNS/論文ポスト']
      ]);

      const normalizeCategory = (value) => {
        const raw = value === undefined || value === null ? '' : value;
        const normalized = raw.toString().trim().toLowerCase();
        if (!normalized || normalized === 'all' || normalized === 'everything') {
          return 'all';
        }
        if (['business', 'biz', 'business-news'].includes(normalized)) {
          return 'business';
        }
        if (['tools', 'tool'].includes(normalized)) {
          return 'tools';
        }
        if (['posts', 'post', 'sns', 'sns/posts'].includes(normalized)) {
          return 'posts';
        }
        return normalized;
      };

      const absoluteFormatter = new Intl.DateTimeFormat('ja-JP', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        hour12: false
      });
      const relativeFormatter =
        typeof Intl !== 'undefined' && typeof Intl.RelativeTimeFormat === 'function'
          ? new Intl.RelativeTimeFormat('ja', { numeric: 'auto' })
          : null;

      const toRelative = (diffMs) => {
        const units = [
          { unit: 'year', value: 1000 * 60 * 60 * 24 * 365 },
          { unit: 'month', value: 1000 * 60 * 60 * 24 * 30 },
          { unit: 'week', value: 1000 * 60 * 60 * 24 * 7 },
          { unit: 'day', value: 1000 * 60 * 60 * 24 },
          { unit: 'hour', value: 1000 * 60 * 60 },
          { unit: 'minute', value: 1000 * 60 },
          { unit: 'second', value: 1000 }
        ];

        if (relativeFormatter) {
          for (const { unit, value } of units) {
            if (Math.abs(diffMs) >= value) {
              return relativeFormatter.format(Math.round(diffMs / value), unit);
            }
          }
          return relativeFormatter.format(0, 'second');
        }

        const absoluteSeconds = Math.round(Math.abs(diffMs) / 1000);
        if (absoluteSeconds >= 86400) {
          const days = Math.round(absoluteSeconds / 86400);
          return days + '日前';
        }
        if (absoluteSeconds >= 3600) {
          const hours = Math.round(absoluteSeconds / 3600);
          return hours + '時間前';
        }
        if (absoluteSeconds >= 60) {
          const minutes = Math.round(absoluteSeconds / 60);
          return minutes + '分前';
        }
        return absoluteSeconds + '秒前';
      };

      const getImportanceLevel = (score) => {
        if (!Number.isFinite(score)) return 'medium';
        if (score >= 7) return 'high';
        if (score >= 4) return 'medium';
        return 'low';
      };

      const normalizeText = (value) => {
        if (value === undefined || value === null) {
          return '';
        }
        return value.toString().replace(/\s+/g, ' ').trim();
      };

      const parseRelativeTimeLabel = (label, now = Date.now()) => {
        const original = normalizeText(label);
        if (!original) {
          return { timestamp: Number.NaN, label: '' };
        }
        const normalized = original.replace(/^約/, '');
        const match = normalized.match(/^(\d+)(秒|分|時間|日)前$/);
        if (match) {
          const amount = Number.parseInt(match[1], 10);
          const unit = match[2];
          const unitMap = { 秒: 1000, 分: 60000, 時間: 3600000, 日: 86400000 };
          const multiplier = unitMap[unit];
          if (Number.isFinite(amount) && multiplier) {
            return { timestamp: now - amount * multiplier, label: original };
          }
        }
        return { timestamp: Number.NaN, label: original };
      };

      const cardRecords = [];

      const emptyState = document.createElement('p');
      emptyState.className = 'news-empty';
      emptyState.textContent = '該当するニュースが見つかりません。検索条件を調整してください。';
      emptyState.hidden = true;
      newsGrid.insertAdjacentElement('afterend', emptyState);

      const now = Date.now();

      legacyPanels.forEach((panel) => {
        const category = normalizeCategory(
          panel.dataset.category ||
            panel.getAttribute('data-category') ||
            panel.id ||
            'all'
        );
        panel.querySelectorAll('.enhanced-card, .card').forEach((card) => {
          const originalIndex = cardRecords.length;
          const link = card.querySelector('a');
          const href = normalizeText(link ? link.href : '');
          const linkText = link ? link.textContent : '';
          const cardTitleNode = card.querySelector('.card-title');
          const summaryNode = card.querySelector('.card-summary');
          const titleText =
            normalizeText(linkText) ||
            normalizeText(cardTitleNode ? cardTitleNode.textContent : '') ||
            '記事詳細';
          const summaryText = normalizeText(summaryNode ? summaryNode.textContent : '');

          const chipElements = Array.from(
            card.querySelectorAll('.chip, .tag, .card-meta span')
          );
          const chipTexts = chipElements
            .map((chip) => normalizeText(chip.textContent))
            .filter(Boolean);

          let sourceText = normalizeText(
            card.dataset.source || card.getAttribute('data-source')
          );
          if (!sourceText) {
            sourceText =
              chipTexts.find(
                (text) =>
                  text &&
                  !text.includes('翻訳') &&
                  !text.includes('要約') &&
                  !text.includes('原文') &&
                  !/\d+\s*(秒|分|時間|日)前$/.test(text)
              ) ||
              '';
          }

          const rawTime = card.dataset.time || card.getAttribute('data-time');
          let publishedMs = Number.NaN;
          let absoluteText = '';
          let relativeText = '';

          if (rawTime) {
            const parsed = Date.parse(rawTime);
            if (!Number.isNaN(parsed)) {
              publishedMs = parsed;
              absoluteText = absoluteFormatter.format(new Date(parsed));
              relativeText = toRelative(parsed - now);
            }
          }

          for (const text of chipTexts) {
            if (!text) continue;
            if (!relativeText && /\d+\s*(秒|分|時間|日)前$/.test(text)) {
              const parsed = parseRelativeTimeLabel(text, now);
              relativeText = parsed.label || relativeText;
              if (Number.isNaN(publishedMs) && Number.isFinite(parsed.timestamp)) {
                publishedMs = parsed.timestamp;
                absoluteText = absoluteFormatter.format(new Date(parsed.timestamp));
              }
              break;
            }
          }

          const tags = chipTexts.filter((text) => {
            if (!text) return false;
            if (text === relativeText) return false;
            if (/\d+\s*(秒|分|時間|日)前$/.test(text)) return false;
            return true;
          });
          if (sourceText) {
            if (!tags.includes(sourceText)) {
              tags.unshift(sourceText);
            }
          }

          const scoreAttr = card.dataset.score || card.getAttribute('data-score');
          const score = scoreAttr ? Number.parseFloat(scoreAttr) : Number.NaN;
          const hasScore = Number.isFinite(score);
          const importance = hasScore ? getImportanceLevel(score) : 'medium';

          card.innerHTML = '';
          card.className = 'news-card';
          card.setAttribute('role', 'listitem');
          card.dataset.category = category;
          card.dataset.importance = importance;
          card.dataset.score = hasScore ? String(score) : '';
          card.dataset.publishedMs = Number.isFinite(publishedMs)
            ? String(publishedMs)
            : '';
          card.dataset.searchText = [
            titleText,
            summaryText,
            sourceText,
            absoluteText,
            relativeText,
            ...tags
          ]
            .join(' ')
            .replace(/\s+/g, ' ')
            .toLowerCase();
          card.dataset.originalIndex = String(originalIndex);

          const titleId = `news-card-title-${originalIndex + 1}`;
          card.setAttribute('aria-labelledby', titleId);

          const header = document.createElement('header');
          header.className = 'news-card__header';

          const headline = document.createElement('div');
          headline.className = 'news-card__headline';

          const metaTop = document.createElement('div');
          metaTop.className = 'news-card__meta-top';

          if (hasScore) {
            const badge = document.createElement('span');
            badge.className = `news-card__badge news-card__badge--${importance}`;
            badge.textContent =
              importance === 'high'
                ? '重要度 高'
                : importance === 'medium'
                ? '重要度 中'
                : '重要度 低';
            metaTop.appendChild(badge);

            const scoreEl = document.createElement('span');
            scoreEl.className = 'news-card__score';
            scoreEl.textContent = `スコア: ${score.toFixed(1)}`;
            metaTop.appendChild(scoreEl);
          }

          if (relativeText || absoluteText) {
            const freshness = document.createElement('span');
            freshness.className = 'news-card__freshness';
            const displayText = absoluteText && relativeText
              ? `${absoluteText} · ${relativeText}`
              : absoluteText || relativeText;
            const announceText = absoluteText && relativeText
              ? `${absoluteText}（${relativeText}）`
              : absoluteText || relativeText;
            freshness.textContent = displayText;
            if (announceText) {
              freshness.setAttribute('aria-label', announceText);
            }
            metaTop.appendChild(freshness);
          }

          if (metaTop.childElementCount > 0) {
            headline.appendChild(metaTop);
          }

          const titleLink = document.createElement('a');
          titleLink.className = 'news-card__title';
          titleLink.id = titleId;
          titleLink.href = href || '#';
          if (href) {
            titleLink.target = '_blank';
            titleLink.rel = 'noopener noreferrer';
          }
          titleLink.textContent = titleText;
          headline.appendChild(titleLink);
          header.appendChild(headline);
          card.appendChild(header);

          const body = document.createElement('div');
          body.className = 'news-card__body';

          if (summaryText) {
            const summary = document.createElement('p');
            summary.className = 'news-card__summary';
            summary.textContent = summaryText;
            body.appendChild(summary);
          }

          if (tags.length) {
            const tagList = document.createElement('div');
            tagList.className = 'news-card__taglist';
            tags.forEach((text) => {
              if (!text) return;
              const tag = document.createElement('span');
              tag.className = 'news-card__tag';
              tag.textContent = text;
              tagList.appendChild(tag);
            });
            if (tagList.childElementCount) {
              body.appendChild(tagList);
            }
          }

          card.appendChild(body);

          const footer = document.createElement('footer');
          footer.className = 'news-card__footer';

          const cta = document.createElement('a');
          cta.className = 'news-card__cta';
          cta.href = href || '#';
          if (href) {
            cta.target = '_blank';
            cta.rel = 'noopener noreferrer';
          }
          cta.textContent = '原文リンクを開く';
          cta.setAttribute('aria-label', `${titleText}の原文を新しいタブで開く`);
          footer.appendChild(cta);

          card.appendChild(footer);

          newsGrid.appendChild(card);

          cardRecords.push({
            element: card,
            category,
            score: hasScore ? score : Number.NaN,
            importance: hasScore ? importance : 'medium',
            publishedMs,
            searchText: card.dataset.searchText,
            originalIndex
          });
        });
      });

      legacyPanels.forEach((panel) => panel.remove());

      const state = {
        category: 'all',
        keywords: [],
        currentInput: '',
        sort: sortSelect ? sortSelect.value || 'importance' : 'importance'
      };

      const applyTheme = (theme) => {
        const next = theme === 'dark' ? 'dark' : 'light';
        root.dataset.theme = next;
        if (themeToggle) {
          themeToggle.setAttribute('aria-pressed', next === 'dark' ? 'true' : 'false');
          const icon = themeToggle.querySelector('.toggle-icon');
          const label = themeToggle.querySelector('.toggle-label');
          if (icon) icon.textContent = next === 'dark' ? '🌙' : '🌞';
          if (label) label.textContent = next === 'dark' ? 'ダーク' : 'ライト';
        }
      };

      const storedTheme = (function () {
        try {
          if (typeof window === 'undefined' || !window.localStorage) {
            return null;
          }
          return window.localStorage.getItem('daily-ai-news-theme');
        } catch (error) {
          return null;
        }
      })();

      if (storedTheme) {
        applyTheme(storedTheme);
      } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        applyTheme('dark');
      }

      const handleThemeToggle = () => {
        const nextTheme = root.dataset.theme === 'dark' ? 'light' : 'dark';
        applyTheme(nextTheme);
        try {
          if (typeof window !== 'undefined' && window.localStorage) {
            window.localStorage.setItem('daily-ai-news-theme', nextTheme);
          }
        } catch (error) {
          // ignore
        }
      };

      if (themeToggle) {
        themeToggle.addEventListener('click', handleThemeToggle);
        themeToggle.addEventListener('keydown', (event) => {
          if (event.key === ' ' || event.key === 'Enter') {
            event.preventDefault();
            handleThemeToggle();
          }
        });
      }

      const renderTags = () => {
        if (!searchTagsContainer) return;
        searchTagsContainer.textContent = '';

        if (state.keywords.length === 0) {
          const placeholder = document.createElement('span');
          placeholder.className = 'search-tags__placeholder';
          placeholder.setAttribute('role', 'listitem');
          placeholder.textContent = 'キーワードを追加するとタグとして表示されます';
          searchTagsContainer.appendChild(placeholder);
          return;
        }

        state.keywords.forEach((keyword, index) => {
          const tag = document.createElement('span');
          tag.className = 'search-tag';
          tag.setAttribute('role', 'listitem');
          tag.textContent = keyword;

          const removeButton = document.createElement('button');
          removeButton.type = 'button';
          removeButton.className = 'search-tag__remove';
          removeButton.setAttribute('aria-label', `検索タグ「${keyword}」を削除`);
          removeButton.innerHTML = '<span aria-hidden="true">×</span>';

          removeButton.addEventListener('click', () => {
            state.keywords.splice(index, 1);
            renderTags();
            applyFilters();
          });

          removeButton.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' || event.key === ' ') {
              event.preventDefault();
              state.keywords.splice(index, 1);
              renderTags();
              applyFilters();
            }
          });

          tag.appendChild(removeButton);
          searchTagsContainer.appendChild(tag);
        });
      };

      const applyFilters = () => {
        const activeKeywords = state.currentInput
          ? [...state.keywords, state.currentInput]
          : [...state.keywords];
        const importanceFilter = importanceSelect ? importanceSelect.value || 'all' : 'all';
        const freshnessFilter = freshnessSelect ? freshnessSelect.value || 'all' : 'all';
        const now = Date.now();

        let visibleCount = 0;
        const totalInCategory =
          state.category === 'all'
            ? cardRecords.length
            : cardRecords.filter((record) => record.category === state.category).length;

        cardRecords.forEach((record) => {
          const { element } = record;
          let visible = true;

          if (state.category !== 'all' && record.category !== state.category) {
            visible = false;
          }

          if (visible && importanceFilter !== 'all') {
            visible = record.importance === importanceFilter;
          }

          if (visible && freshnessFilter !== 'all') {
            if (Number.isFinite(record.publishedMs)) {
              const hours = (now - record.publishedMs) / 36e5;
              if (freshnessFilter === '24h' && hours > 24) visible = false;
              if (freshnessFilter === '72h' && hours > 72) visible = false;
              if (freshnessFilter === '168h' && hours > 168) visible = false;
            } else {
              visible = false;
            }
          }

          if (visible && activeKeywords.length) {
            const text = record.searchText;
            visible = activeKeywords.every((keyword) => text.includes(keyword));
          }

          element.hidden = !visible;
          element.classList.toggle('is-hidden', !visible);
          element.setAttribute('aria-hidden', String(!visible));

          if (visible) {
            visibleCount += 1;
          }
        });

        if (resultsRegion) {
          const label = labelByCategory.get(state.category) || 'すべて';
          resultsRegion.textContent = `${label}：${visibleCount}件表示中（全${totalInCategory}件）`;
        }

        if (emptyState) {
          emptyState.hidden = visibleCount > 0;
        }
      };

      const sortCards = () => {
        const sortBy = state.sort;
        const sorted = [...cardRecords].sort((a, b) => {
          if (sortBy === 'importance') {
            return (Number.isFinite(b.score) ? b.score : -Infinity) - (Number.isFinite(a.score) ? a.score : -Infinity);
          }
          if (sortBy === 'freshness') {
            return (Number.isFinite(b.publishedMs) ? b.publishedMs : -Infinity) - (Number.isFinite(a.publishedMs) ? a.publishedMs : -Infinity);
          }
          if (sortBy === 'time') {
            return (Number.isFinite(a.publishedMs) ? a.publishedMs : Infinity) - (Number.isFinite(b.publishedMs) ? b.publishedMs : Infinity);
          }
          return a.originalIndex - b.originalIndex;
        });

        sorted.forEach((record) => {
          newsGrid.appendChild(record.element);
        });
      };

      const applySortAndFilter = () => {
        sortCards();
        applyFilters();
      };

      categoryButtons.forEach((button) => {
        button.addEventListener('click', () => {
          const category = normalizeCategory(
            button.dataset.category || button.getAttribute('data-category') || 'all'
          );
          state.category = category;
          categoryButtons.forEach((target) => {
            const isActive = target === button;
            target.classList.toggle('is-active', isActive);
            target.setAttribute('aria-pressed', isActive ? 'true' : 'false');
          });
          applySortAndFilter();
        });

        button.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            button.click();
          }
        });
      });

      if (searchForm) {
        searchForm.addEventListener('submit', (event) => {
          event.preventDefault();
          const value = searchInput ? searchInput.value.trim() : '';
          if (!value) return;
          const normalized = value.toLowerCase();
          if (!state.keywords.includes(normalized)) {
            state.keywords.push(normalized);
          }
          if (searchInput) {
            searchInput.value = '';
          }
          state.currentInput = '';
          renderTags();
          applySortAndFilter();
        });
      }

      if (searchInput) {
        searchInput.addEventListener('keydown', (event) => {
          if (event.key === 'Enter') {
            event.preventDefault();
            if (searchForm) {
              searchForm.dispatchEvent(new Event('submit', { cancelable: true }));
            }
          }
          if (event.key === 'Backspace' && !searchInput.value && state.keywords.length) {
            state.keywords.pop();
            renderTags();
            applySortAndFilter();
          }
        });

        searchInput.addEventListener('input', () => {
          state.currentInput = (searchInput.value || '').trim().toLowerCase();
          applyFilters();
        });
      }

      if (importanceSelect) {
        importanceSelect.addEventListener('change', applyFilters);
      }
      if (freshnessSelect) {
        freshnessSelect.addEventListener('change', applyFilters);
      }

      if (sortSelect) {
        sortSelect.addEventListener('change', (event) => {
          state.sort = event.target.value;
          applySortAndFilter();
        });
      }

      applySortAndFilter();
      renderTags();
    });
  </script>
</body>
</html>
